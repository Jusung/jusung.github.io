---
layout: post
title: "Reduce á„’á…¡á†·á„‰á…® á„€á…®á„’á…§á†«á„’á…¢ á„‡á…©á„€á…µ"
category:
  - Practice
comments: true
published: true
---

## ê°œìš”
ì§€ë‚œ ì‹œê°„ì—ëŠ” `Map`, `Reduce`, `Filter` í•¨ìˆ˜ ì¤‘ [Map](https://jusung.github.io/swift/Map-í•¨ìˆ˜-êµ¬í˜„í•´-ë³´ê¸°/)í•¨ìˆ˜ì™€ [Filter](https://jusung.github.io/swift/Filter-í•¨ìˆ˜-êµ¬í˜„í•´-ë³´ê¸°/)í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ ë´¤ìŠµë‹ˆë‹¤. ì´ë²ˆ ì‹œê°„ì—ëŠ” `Reduce` í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ì´ í¬ìŠ¤íŠ¸ë¥¼ ì œëŒ€ë¡œ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” Closureì™€ Genericì— ëŒ€í•œ ì´í•´ê°€ ì„ í–‰ë¼ì•¼ í•©ë‹ˆë‹¤. ë§Œì•½ ìµìˆ™í•˜ì§€ ì•Šìœ¼ì‹œë‹¤ë©´ Swift ê³µì‹ë¬¸ì„œì˜ Closure([ì˜ì–´](https://docs.swift.org/swift-book/LanguageGuide/Closures.html), [í•œêµ­ì–´](https://jusung.gitbook.io/the-swift-language-guide/untitled-4))ì™€ Generic([ì˜ì–´](https://docs.swift.org/swift-book/LanguageGuide/Generics.html), [í•œêµ­ì–´](https://jusung.gitbook.io/the-swift-language-guide/untitled-18)) ì„¹ì…˜ì˜ ì •ë…ì„ ê¶Œí•´ë“œë¦½ë‹ˆë‹¤.

## Reduce í•¨ìˆ˜ì˜ ë™ì‘
`reduce`í•¨ìˆ˜ëŠ” ì´ë¦„ì—ì„œ ìœ ì¶”í•  ìˆ˜ ìˆë“¯ì´ ë¬´ì–¸ê°€ ì¤„ì—¬ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ë³´ë‹¤ ìì„¸íˆëŠ” ì£¼ì–´ì§„ ì½œë ‰ì…˜ì˜ ì›ì†Œë¥¼ íŠ¹ì •í•˜ê²Œ ê²°í•©(combine)ì‹œì¼œ í•˜ë‚˜ì˜ ì—°ê²°(concatenation)ëœ í˜•íƒœë¡œ ë§Œë“¤ì–´ ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì…ë ¥ ê°’ì´ ê°ê° ë‹¤ìŒê³¼ ê°™ë‹¤ë©´ 

```swift
let intArray = [1,2,3,4,5]
let stringArray = ["Hello,","Nice", "to", "meet", "You"]
```

ì´ ì…ë ¥ì„ `reduce`í•¨ìˆ˜ë¥¼ ì´ìš©í•´ íŠ¹ì • í˜•íƒœë¡œ ì—°ê²°ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
let intResult = intArray.reduce(0) { result, x in result + x }
let stringResult = stringArray.reduce("") { result, x in result + x + " "}
```

`intResult`ëŠ” ì½œë ‰ì…˜ ê° ì›ì†Œë¥¼ ë”í•œ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ê³ , `stringResult`ëŠ” ì½œë ‰ì…˜ ê° ì›ì†Œë¥¼ ë”í•˜ê³  ë¹ˆ ê³µë°±ì„ ë’¤ì— ì¶”ê°€í•´ ê²°í•©í•©ë‹ˆë‹¤. (ê¸€ì„ ì½ëŠ” ì§€ê¸ˆ `reduce` í•¨ìˆ˜ì˜ ì‚¬ìš©ì´ ì •í™•íˆ ì´í•´ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  ê±±ì •í•˜ì‹¤ í•„ìš” ì—†ìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ì´ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ëŠ” ê³¼ì • ì¤‘ì— ì´í•´í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.)

ìœ„ `reduce`í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ëŠ” ê°ê° ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```
intResult : 15
stringResult : Hello, Nice to meet You 
```

## Reduce í•¨ìˆ˜ì˜ êµ¬í˜„

ê·¸ëŸ¼ ìœ„ ì˜ˆì œì™€ ë˜‘ê°™ì´ ë™ì‘í•˜ëŠ” `reduce`í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ìš°ì„  Int ë°°ì—´ì˜ ê° ì›ì†Œë¥¼ ë”í•´ì„œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

```swift
func sum(xs: [Int]) -> Int {
    var result = 0
    
    for x in xs {
        result += x
    }
    
    return result
}
```

ì´ˆê¸° ê²°ê³¼ê°’ì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ê³  ì´í›„ ì£¼ì–´ì§„ ë°°ì—´ì˜ ì •ìˆ˜ë¥¼ í•˜ë‚˜ì”© ë”í•´ ì „ë¶€ ë”í•œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

ì´ì œ String ë°°ì—´ì˜ ê° ì›ì†Œë¥¼ ëª¨ë‘ ì´ì–´ì„œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

```swift
func combine(xs: [String]) -> String {
    var result = ""

    for x in xs {
        result += x + " "
    }

    return result
}
```

ì´ˆê¸° ê²°ê³¼ê°’ì„ ë¹ˆìƒíƒœë¡œ ì‹œì‘í•´ ì£¼ì–´ì§„ ë°°ì—´ì˜ ë¬¸ìë¥¼ ëª¨ë‘ ë”í•´ ì „ë¶€ ë”í•œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê° ì›ì†Œë¥¼ ë„ì–´ì„œ ê²°í•©í•˜ê¸° ìœ„í•´ ë’¤ì— ì›ì†Œë¥¼ ê²°í•©í•œ í›„ì— `" "`ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

ì´ ë‘ í•¨ìˆ˜ì˜ ê³µí†µì ì„ ì°¾ìœ¼ì…¨ë‚˜ìš”? 

ê³µí†µì ì€ 1. ì´ˆê¸°ê°’ì„ ì§€ì •í•˜ê³  2. ê° ì›ì†Œë¥¼ ì–´ë–»ê²Œ ê²°í•©ì‹œí‚¬ì§€ ì •ì˜ í–ˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ê³µí†µì ì„ ë½‘ì•„ë‚´ êµ¬í˜„í•˜ë©´ `reduce`í•¨ìˆ˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” Generic í•¨ìˆ˜ë¥¼ ë§Œë“¤ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```swift
func customReduce<A, R>(xs: [A], initialResult: R, nextPartialResult: (R, A) -> R) -> R {
    var result = initialResult

    for x in xs {
        result = nextPartialResult(result, x)
    }

    return result
}
```

ì•ì—ì„œ ë§Œë“  `sum`í•¨ìˆ˜ì™€ `combine`í•¨ìˆ˜ë„ `customReduce`í•¨ìˆ˜ë¡œ ì •ì˜í•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
func sumUsingReduce(xs: [Int]) -> Int {
    return customReduce(xs: xs, initialResult: 0, nextPartialResult: { result, x in result + x })
}

func combineUsingReduce(xs: [String]) -> String {
    return customReduce(xs: xs, initialResult: "", nextPartialResult: { result, x in result + x + " " })
}
```

ì´ í•¨ìˆ˜ì˜ ì‹¤í–‰ ê²°ê³¼ëŠ” ì•ì˜ ê²°ê³¼ì™€ ë™ì¼í•©ë‹ˆë‹¤.

[ì‹¤í–‰ê²°ê³¼]

```
sumResult : 15
combineResult : Hello, Nice to meet You 
```

ë§ˆì§€ë§‰ìœ¼ë¡œ ë°°ì—´ì„ ì…ë ¥ë°›ì•„ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Swiftì—ì„œ ì œê³µí•´ì£¼ëŠ” `reduce`í•¨ìˆ˜ì²˜ëŸ¼ ë°°ì—´ì—ì„œ ì§ì ‘ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ `Array`ì˜ extensionìœ¼ë¡œ `customReduce`í•¨ìˆ˜ë¥¼ ì¶”ê°€ í•´ë³´ê² ìŠµë‹ˆë‹¤.

```swift
extension Array {
    func customReduce<R>(_ initialResult: R, nextPartialResult: (R, Element) -> R) -> R {
        var result = initialResult
        
        for x in self {
            result = nextPartialResult(result, x)
        }
        
        return result
    }
}
```

### Reduce í•¨ìˆ˜ì™€ CustomReduce í•¨ìˆ˜ì˜ ë™ì‘

ì´ì œ Swiftì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•´ì£¼ëŠ” `reduce`ì˜ ë™ì‘ê³¼ ì €í¬ê°€ êµ¬í˜„í•œ `customReduce`ì˜ ë™ì‘ì„ ë¹„êµí•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

[ì†ŒìŠ¤ì½”ë“œ]

```swift
let intArray = [1,2,3,4,5]
let stringArray = ["Hello,","Nice", "to", "meet", "You"]
    
let reduceResult1 = intArray.reduce(0) { result, x in result + x }
let customReduceResult1 = intArray.customReduce(0) { result, x in result + x }
    
let reduceResult2 = stringArray.reduce("") { result, x in result + x + " " }
let customReduceResult2 = stringArray.customReduce("") { result, x in result + x + " " }
    
print("Reduce             #1 : \(reduceResult1)")
print("CustomReduceResult #1 : \(customReduceResult1)")
print("======================")
print("Reduce             #2 : \(reduceResult2)")
print("CustomReduceResult #2 : \(customReduceResult2)")
```

[ì‹¤í–‰ê²°ê³¼]

```
Reduce             #1 : 15
CustomReduceResult #1 : 15
======================
Reduce             #2 : Hello, Nice to meet You 
CustomReduceResult #2 : Hello, Nice to meet You 
```

Swiftì—ì„œ ì œê³µí•˜ëŠ” `reduce`í•¨ìˆ˜ì™€ ì €í¬ê°€ ë§Œë“  `customReduce`í•¨ìˆ˜ê°€ ë™ì¼í•˜ê²Œ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê²°ë¡ 
ì´ìƒ `reduce`í•¨ìˆ˜ì— ëŒ€í•´ ì•Œì•„ë³´ê³  ì§ì ‘ êµ¬í˜„í•´ ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ë¡œì¨ ê°€ì¥ ìì£¼ ì‚¬ìš©í•˜ëŠ” `map`,`reduce`,`filter`í•¨ìˆ˜ë¥¼ ëª¨ë‘ ì§ì ‘ êµ¬í˜„í•´ ë³´ì•˜ìŠµë‹ˆë‹¤. ì•Œê³ ë‚˜ë‹ˆ ë³„ë¡œ ì–´ë µì§€ ì•Šì£ ? ğŸ˜

ê·¸ëŸ¼ ì˜¤ëŠ˜ë„ ì¦ì½”~ í•˜ì‹œê¸¸! ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œ ë´¬ìš”~ ğŸ˜‰

