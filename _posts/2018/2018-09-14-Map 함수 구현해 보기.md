---
layout: post
title: "Map í•¨ìˆ˜ êµ¬í˜„í•´ ë³´ê¸°"
tags: 
  - Swift
comments: true
published: true
---

## ê°œìš”
í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì„ í•˜ë©´ì„œ ê°€ì¥ ìì£¼ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ë¼ë©´ `Map`, `Reduce`, `Filter`ë¥¼ ë“¤ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ìì£¼ ì‚¬ìš©ì€ í•˜ëŠ”ë° ì‹¤ì œ ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–»ê²Œ êµ¬í˜„ë¼ ìˆëŠ”ì§€, ì§ì ‘ êµ¬í˜„ í• ìˆ˜ëŠ” ì—†ëŠ”ì§€ ê¶ê¸ˆí•˜ì§€ ì•Šìœ¼ì‹ ê°€ìš”? ğŸ˜„ 

ì´ í¬ìŠ¤íŠ¸ì—ì„œëŠ” `Map`, `Reduce`, `Filter` í•¨ìˆ˜ ì¤‘ `Map`í•¨ìˆ˜ë¥¼ ì–´ë–»ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ì´ í¬ìŠ¤íŠ¸ë¥¼ ì œëŒ€ë¡œ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” Closureì™€ Genericì— ëŒ€í•œ ì´í•´ê°€ ì„ í–‰ë¼ì•¼ í•©ë‹ˆë‹¤. ë§Œì•½ ìµìˆ™í•˜ì§€ ì•Šìœ¼ì‹œë‹¤ë©´ Swift ê³µì‹ë¬¸ì„œì˜ Closure([ì˜ì–´](https://docs.swift.org/swift-book/LanguageGuide/Closures.html), [í•œêµ­ì–´](https://jusung.gitbook.io/the-swift-language-guide/untitled-4))ì™€ Generic([ì˜ì–´](https://docs.swift.org/swift-book/LanguageGuide/Generics.html), [í•œêµ­ì–´](https://jusung.gitbook.io/the-swift-language-guide/untitled-18)) ì„¹ì…˜ì˜ ì •ë…ì„ ê¶Œí•´ë“œë¦½ë‹ˆë‹¤.

## Map í•¨ìˆ˜ì˜ ë™ì‘
`map`í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë©´ ì£¼ì–´ì§„ ì…ë ¥ê°’ì„ ë³€í˜•í•´ ë°˜í™˜í•©ë‹ˆë‹¤. ë‹¤ì‹œë§í•´, `map`ì€ ì…ë ¥ê°’ì„ ë³€í˜•(transforming) í•´ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì…ë ¥ê°’ì´ ë‹¤ìŒê³¼ ê°™ë‹¤ë©´

```swift
let array = [1,2,3,4,5]
```

ì´ ì…ë ¥ê°’ì„ ê°ê° 1ì”© ì¦ê°€ì‹œí‚¤ê±°ë‚˜, 2ë°°ë¡œ ë§Œë“œëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ `map`í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
let incresedResult = array.map{ $0 + 1 }
let doubledResult = array.map{ $0 * 2 }
```

`map`í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ëŠ” ê°ê° ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```
incresedResult : [2, 3, 4, 5, 6]
doubledResult : [2, 4, 6, 8, 10]
```

ê·¸ëŸ¼ ì§€ê¸ˆë¶€í„° `map`í•¨ìˆ˜ë¥¼ ì–´ë–»ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ”ì§€ ìœ„ ì˜ˆì œë¡œë¶€í„° í•˜ë‚˜í•˜ë‚˜ ì¶”ì í•´ ë‚˜ê°€ ë³´ê² ìŠµë‹ˆë‹¤.
`map`í•¨ìˆ˜ê°€ ì‹¤í–‰í•œ ë‘ ê¸°ëŠ¥ì„ í•¨ìˆ˜ë¡œ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.

## Map í•¨ìˆ˜ì˜ êµ¬í˜„
ë¨¼ì € ì£¼ì–´ì§„ ë°°ì—´ì˜ ê° ì›ì†Œê°’ì„ 1ì”© ì¦ê°€ì‹œì¼œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

```swift
func incrementArray(xs : [Int]) -> [Int] {
    var result = [Int]()
    
    for x in xs {
        result.append(x + 1)
    }
    
    return result
}
```
ì£¼ì–´ì§„ ë°°ì—´ì˜ ì›ì†Œë¥¼ ê°ê° ìˆœíšŒí•˜ë©´ì„œ ì›ì†Œì— 1ì„ ë”í•œ ê°’ì„ ë‹¤ë¥¸ ë°°ì—´ì— ë„£ì–´ ê·¸ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

ì´ì œ ë°°ì—´ì˜ ê° ì›ì†Œê°’ì„ 2ë°°í•œ í›„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```swift
func doubleArray(xs: [Int]) -> [Int] {
    var result = [Int]()
    
    for item in xs {
        result.append(item * 2)
    }
    
    return result
}
```

ì•ì„œ êµ¬í˜„í•œ í•¨ìˆ˜ì™€ ê±°ì˜ ë¹„ìŠ·í•˜ê³  ë‚´ìš©ì¤‘ì— 1ì¤„ë§Œ ë‹¤ë¦…ë‹ˆë‹¤. 

```swift
result.append(x + 1)
or
result.append(item * 2)
```


ìœ„ ì°¨ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ `Int`ë°°ì—´ì„ ë³€í™˜í•˜ëŠ” ê³µí†µëœ í•¨ìˆ˜ë¥¼ ì •ì˜í•´ ë³´ë©´ ì´ë ‡ê²Œ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

```swift
func computeIntArray(xs: [Int]) -> [Int] {
    var result = [Int]()
    
    for item in xs {
        result.append(/* xì— ê´€í•œ í•¨ìˆ˜ */)
    }
    
    return result
}
```

`x`ì˜ ë³€í™”ì— ëŒ€í•œ ë‚´ìš©ì„ í•¨ìˆ˜ë¡œ ì…ë ¥ë°›ê³ , ì‹¤í–‰í•˜ë„ë¡ êµ¬í˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
func computeIntArray(xs: [Int], f: (Int) -> Int) -> [Int] {
    var result = [Int]()
    
    for x in xs {
        result.append(f(x))
    }
    
    return result
}
```

`computeArray`ëŠ” `f: (Int) -> Int` ë¼ëŠ” `Int`ë¥¼ ê°ê° ì…ë ¥ê°’ê³¼ ì¶œë ¥ê°’ìœ¼ë¡œ ê°–ëŠ” í•¨ìˆ˜ ì´ê³ , ì´ í•¨ìˆ˜ëŠ” `result.append()`ë‚´ì—ì„œ `f(x)`ë¼ëŠ” í•¨ìˆ˜ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

ì´ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ì•ì— `incrementArray `, `doubleArray` í•¨ìˆ˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
func incrementArray(xs: [Int]) -> [Int] {
    return computeIntArray(xs: xs) { $0 + 1 }
}

func doubleArray2(xs: [Int]) -> [Int] {
    return computeIntArray(xs: xs) { $0 * 2 }
}

```

ë­”ê°€ ê·¸ëŸ´ë“¯í•´ ë³´ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ê±°ì˜ ëë‚œ ê²ƒì¼ê¹Œìš”? ì•„ë‹™ë‹ˆë‹¤. `map`ì—ì„œëŠ” ë‹¤ìŒì˜ ê²½ìš°ë„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
func isEvenArray(xs : [Int]) -> [Bool] {
    return computeIntArray(xs: xs) { $0 % 2 == 0 }
}
```

`isEvenArray`ëŠ” Intë°°ì—´ì„ ì…ë ¥ìœ¼ë¡œ ë°›ì•„ ê° ì›ì†Œê°€ ì§ìˆ˜ì¸ì§€ ì•„ë‹Œì§€ì— ëŒ€í•´ íŒë³„í•œ `Bool`ê°’ì„ ê²°ê³¼ ë°°ì—´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ ê³„ì‚°ì— `computeIntArray` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ íƒ€ì…ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì´ í•¨ìˆ˜ëŠ” `Int -> Int`ë¥¼ ì¸ìë¡œ ì‚¬ìš©í•˜ëŠ”ë° `isEvenArray` í•¨ìˆ˜ì—ì„œëŠ” `Int -> Bool`ì„ í•„ìš”ë¡œ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. 

ê·¸ë ‡ê¸° ë•Œë¬¸ì— `isEvenArray`í•¨ìˆ˜ì—ì„œ `computeIntArray`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `computeIntArray`ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.

```swift
func computeIntArray(xs: [Int], f: (Int) -> Bool) -> [Bool] {
    var result = [Bool]()
    
    for x in xs {
        result.append(f(x))
    }
    
    return result
}
```

ì²˜ìŒì— ì‘ì„±í•œ `computeIntArray`ê³¼ ë¹„êµí–ˆì„ ë•Œ ì¼ë¶€ê°’ì˜ íƒ€ì…ì´ `Int`ì—ì„œ `Bool`ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.
ë°˜í™˜ê°’ì˜ í˜•ì´ ë‹¤ë¥¼ ë•Œë§ˆë‹¤ `computeIntArray`ë¥¼ ì¬ì •ì˜ í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤ë©´ í™•ì¥ì„±ì´ ì—†ì–´ ë¹„íš¨ìœ¨ì ì¼ ê²ƒì…ë‹ˆë‹¤. ì´ëŸ´ ë•Œ ì‚¬ìš©í•˜ë¼ê³  Swiftì—ì„œëŠ” Genericë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤. ğŸ˜„ Genericì„ ì‚¬ìš©í•´ `computeIntArray`ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
func genericComputeArray<U>(xs: [Int], f: (Int) -> U) -> [U] {
    var result = [U]()
    
    for x in xs {
        result.append(f(x))
    }
    
    return result
}
```

ì—¬ê¸°ì„œ í•œë°œ ë” ë‚˜ì•„ê°€ `[Int]`ì™€ `(Int)`ë„ íƒ€ì…ì˜ ì œí•œì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ generic íŒŒë¼ë¯¸í„° `T`ë¥¼ ì¶”ê°€í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```swift
func customMap<T, U>(xs: [Int], f: (T) -> U) -> [U] {
    var result = [U]()
    
    for x in xs {
        result.append(f(x))
    }
    
    return result
}
```

ì´ì œ ì €í¬ê°€ êµ¬í˜„í•œ `customMap`ì„ ì´ìš©í•´ `isEvenArray`ì™€ `doubleArray3`ë¥¼ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```swift
func isEvenArray(xs : [Int]) -> [Bool] {
    return customMap(xs: xs) { $0 % 2 == 0 }
}
    
func doubleArray3(xs: [Int]) -> [Int] {
    return customMap(xs: xs) { $0 * 2 }
}
```

ë‘ í•¨ìˆ˜ì˜ ë°˜í™˜ ê°’ì´ ê°ê° `[Bool]`ê³¼ `[Int]`ì´ì§€ë§Œ `customMap`í•¨ìˆ˜ë¥¼ genericìœ¼ë¡œ êµ¬í˜„í–ˆê¸° ë•Œë¬¸ì— ë‘ í•¨ìˆ˜ ë‹¤ ì˜ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[ì†ŒìŠ¤ì½”ë“œ]

```swift
let array = [1,2,3,4,5]

let isEvenResult = isEvenArray(xs: array)
let doubleResult3 = doubleArray3(xs: array)

print("isEvenResult : \(isEvenResult)")
print("doubleResult3 : \(doubleResult3)")
```

[ì‹¤í–‰ê²°ê³¼]

```
isEvenResult : [false, true, false, true, false]
doubleResult3 : [2, 4, 6, 8, 10]
```

ì—¬ê¸°ì„œ ëì´ ì•„ë‹™ë‹ˆë‹¤. `map`ì— ìµœëŒ€í•œ ê°€ê¹Œê¸° ìœ„í•´ ë§ˆì§€ë§‰ìœ¼ë¡œ í•œê±¸ìŒ ë” ë“¤ì–´ê°€ ë³´ê² ìŠµë‹ˆë‹¤. `map`ì€ ë°°ì—´ì„ ì…ë ¥ë°›ì•„ì„œ ì‹¤í–‰ë˜ì§€ ì•Šê³  ë°°ì—´ì—ì„œ ì§ì ‘ ì´ë£¨ì–´ ì§‘ë‹ˆë‹¤. ì´ê²ƒì„ ì§€ì›í•˜ê¸° ìœ„í•´ `Array` í´ë˜ìŠ¤ì— `customMap`ì„ í™•ì¥í•´ ì¶”ê°€í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```swift
extension Array {
    func customMap<U>(f: (Element) -> U) -> [U] {
        var result = [U]()
        
        for x in self {
            result.append(f(x))
        }
        
        return result
    }
}
```

`Array`ì˜ ì¸ìëŠ” `T`ëŒ€ì‹  `Element`ë¼ëŠ” ì§€ì •ëœ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë“œë””ì–´ ë‹¤ ëë‚¬ìŠµë‹ˆë‹¤. ğŸ˜

## Map í•¨ìˆ˜ì™€ CustomMap í•¨ìˆ˜ì˜ ë™ì‘
ì´ì œ Swiftì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•´ì£¼ëŠ” `map`ì˜ ë™ì‘ê³¼ ì €í¬ê°€ êµ¬í˜„í•œ `customMap`ì˜ ë™ì‘ì„ ë¹„êµí•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

[ì†ŒìŠ¤ì½”ë“œ]

```swift
let array = [1,2,3,4,5]

let mapResult1 = array.map{ $0 + 1 }
let customMapResult1 = array.customMap{ $0 + 1 }
    
let mapResult2 = array.map{ $0 * 2}
let customMapResult2 = array.customMap{ $0 * 2 }

let mapResult3 = array.map{ $0 % 2 == 0 }
let customMapResult3 = array.customMap{ $0 % 2 == 0 }
    
print("Map       #1 : \(mapResult1)")
print("CustomMap #1 : \(customMapResult1)")
print("==============================")
print("Map       #2 : \(mapResult2)")
print("CustomMap #2 : \(customMapResult2)")
print("==============================")
print("Map       #3 : \(mapResult3)")
print("CustomMap #3 : \(customMapResult3)")
```

[ì‹¤í–‰ê²°ê³¼]

```
Map       #1 : [2, 3, 4, 5, 6]
CustomMap #1 : [2, 3, 4, 5, 6]
==============================
Map       #2 : [2, 4, 6, 8, 10]
CustomMap #2 : [2, 4, 6, 8, 10]
==============================
Map       #3 : [false, true, false, true, false]
CustomMap #3 : [false, true, false, true, false]
```

Swiftì—ì„œ ì œê³µí•˜ëŠ” `map`í•¨ìˆ˜ì™€ ì €í¬ê°€ ë§Œë“  `customMap`í•¨ìˆ˜ê°€ ë™ì¼í•˜ê²Œ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê²°ë¡ 
`map`í•¨ìˆ˜ëŠ” ì–´ë–¤ ë§ˆë²•ì˜ í•¨ìˆ˜ê°€ ì•„ë‹ˆë¼ ìš°ë¦¬ ëª¨ë‘ ì§ì ‘ ë§Œë“¤ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ëª¨ë“ ê²Œ ê·¸ëŸ° ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì•Œë©´ ì‰½ê³  ëª¨ë¥´ë©´ ì–´ë ¤ì›Œ ë³´ì´ëŠ”. ğŸ˜„

ì´ìƒ `map`í•¨ìˆ˜ì— ëŒ€í•´ ì•Œì•„ë³´ê³  ì§ì ‘ êµ¬í˜„í•´ ë³´ì•˜ìŠµë‹ˆë‹¤. ì´í›„ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ë‚˜ë¨¸ì§€ í•¨ìˆ˜ `reduce`,`filter`í•¨ìˆ˜ë„ ì§ì ‘ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤. 